<!DOCTYPE html>
<html>
    <head>
        <title>WebSocket demo</title>
        <style media="screen">
          .show {
            display: inline;
          }
          .hide {
            display: none
          }
        </style>
    </head>
    <body>
      <span class="hide"> typing </span>
        <script>
          function MyWebSocket(url) {
            this.ws = new WebSocket(url);

            this.ws.onopen = function(e) {
              console.log('ONOPEN', e);
            };
            this.ws.onmessage = function(e) {
              document.getElementsByClassName('hide').className='show';
            }

            this.send = function(data) {
              this.ws.send(data);
              console.log('ok');
            }
          }

          var ws = new MyWebSocket("ws://127.0.0.1:5678/");

        </script>
        <input type='text' placeholder="Your name" id="data-source"/>
        <button onclick="ws.send(document.getElementById('data-source').value)">button</button>


        <script type="text/javascript">
          var inputField = document.getElementById('data-source');
          inputField.oninput = function(e) {
            ws.send('typing');
          }

        </script>
    </body>
</html>
